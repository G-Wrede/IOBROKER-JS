var mqttCmndId, temp, hum;

// Beschreibe diese Funktion …
async function setTemp(temp, hum) {
    /*
    Temperatur auf dem NSPanel unten rechts ausgeben
    */
    const weatherObject = {
      "temperature": Math.round(temp),
      "humidity": Math.round(hum),
      "tempUnit": 0
    };
    console.log('NSPSend: ' + JSON.stringify(weatherObject));
    setState(mqttCmndId, JSON.stringify(weatherObject));
}

// Beschreibe diese Funktion …
async function sendTemp() {
  await setTemp(getState("zigbee.0.00158d0006bf4ae4.temperature").val, getState("zigbee.0.00158d0006bf4ae4.humidity").val);
}


mqttCmndId = 'mqtt.0.Haus.Display.nspanel_7BF904.cmnd.NSPSend';
await sendTemp();
// Wohnzimmer Temperatur im NSPanel anzeigen
on({id: "zigbee.0.00158d0006bf4ae4.temperature"/*Temperature*/, change: "any"}, async function (obj) {
  var value = obj.state.val;
  var oldValue = obj.oldState.val;
  await sendTemp();
});

//JTNDeG1sJTIweG1sbnMlM0QlMjJodHRwcyUzQSUyRiUyRmRldmVsb3BlcnMuZ29vZ2xlLmNvbSUyRmJsb2NrbHklMkZ4bWwlMjIlM0UlM0N2YXJpYWJsZXMlM0UlM0N2YXJpYWJsZSUyMGlkJTNEJTIyTyU3QiU3QzRRJTdES0pWUlNxRzRlVFdMbSU3RCUyMiUzRW1xdHRDbW5kSWQlM0MlMkZ2YXJpYWJsZSUzRSUzQ3ZhcmlhYmxlJTIwaWQlM0QlMjJTJTdDZyFVaXkpKE4lM0FBS1UzJTVCbCU3RGs1JTIyJTNFdGVtcCUzQyUyRnZhcmlhYmxlJTNFJTNDdmFyaWFibGUlMjBpZCUzRCUyMmF2N0khODRjUUtNQ2wlNDBKQnhMJTdDJTQwJTIyJTNFaHVtJTNDJTJGdmFyaWFibGUlM0UlM0MlMkZ2YXJpYWJsZXMlM0UlM0NibG9jayUyMHR5cGUlM0QlMjJwcm9jZWR1cmVzX2RlZmN1c3RvbW5vcmV0dXJuJTIyJTIwaWQlM0QlMjJlJTQwYnIlMkNJUiFlJTI1KTREKng3akd5JTJGJTIyJTIweCUzRCUyMjE4OCUyMiUyMHklM0QlMjItMzEzJTIyJTNFJTNDbXV0YXRpb24lMjBzdGF0ZW1lbnRzJTNEJTIyZmFsc2UlMjIlM0UlM0NhcmclMjBuYW1lJTNEJTIydGVtcCUyMiUyMHZhcmlkJTNEJTIyUyU3Q2chVWl5KShOJTNBQUtVMyU1QmwlN0RrNSUyMiUzRSUzQyUyRmFyZyUzRSUzQ2FyZyUyMG5hbWUlM0QlMjJodW0lMjIlMjB2YXJpZCUzRCUyMmF2N0khODRjUUtNQ2wlNDBKQnhMJTdDJTQwJTIyJTNFJTNDJTJGYXJnJTNFJTNDJTJGbXV0YXRpb24lM0UlM0NmaWVsZCUyMG5hbWUlM0QlMjJOQU1FJTIyJTNFc2V0VGVtcCUzQyUyRmZpZWxkJTNFJTNDZmllbGQlMjBuYW1lJTNEJTIyU0NSSVBUJTIyJTNFTHlvTkNsUmxiWEJsY21GMGRYSWdZWFZtSUdSbGJTQk9VMUJoYm1Wc0lIVnVkR1Z1SUhKbFkyaDBjeUJoZFhOblpXSmxiZzBLS2k4TkNtTnZibk4wSUhkbFlYUm9aWEpQWW1wbFkzUWdQU0I3RFFvZ0lDSjBaVzF3WlhKaGRIVnlaU0k2SUUxaGRHZ3VjbTkxYm1Rb2RHVnRjQ2tzRFFvZ0lDSm9kVzFwWkdsMGVTSTZJRTFoZEdndWNtOTFibVFvYUhWdEtTd05DaUFnSW5SbGJYQlZibWwwSWpvZ01BMEtmVHNOQ21OdmJuTnZiR1V1Ykc5bktDZE9VMUJUWlc1a09pQW5JQ3NnU2xOUFRpNXpkSEpwYm1kcFpua29kMlZoZEdobGNrOWlhbVZqZENrcE93MEtjMlYwVTNSaGRHVW9iWEYwZEVOdGJtUkpaQ3dnU2xOUFRpNXpkSEpwYm1kcFpua29kMlZoZEdobGNrOWlhbVZqZENrcE93JTNEJTNEJTNDJTJGZmllbGQlM0UlM0Njb21tZW50JTIwcGlubmVkJTNEJTIyZmFsc2UlMjIlMjBoJTNEJTIyODAlMjIlMjB3JTNEJTIyMTYwJTIyJTNFQmVzY2hyZWliZSUyMGRpZXNlJTIwRnVua3Rpb24lMjAlRTIlODAlQTYlM0MlMkZjb21tZW50JTNFJTNDJTJGYmxvY2slM0UlM0NibG9jayUyMHR5cGUlM0QlMjJ2YXJpYWJsZXNfc2V0JTIyJTIwaWQlM0QlMjI3JTJDKSUyQ0slN0J1N1ZuaTElNUVNUyUzRCUzQSUzQTZxJTIyJTIweCUzRCUyMjE4NyUyMiUyMHklM0QlMjItMjg3JTIyJTNFJTNDZmllbGQlMjBuYW1lJTNEJTIyVkFSJTIyJTIwaWQlM0QlMjJPJTdCJTdDNFElN0RLSlZSU3FHNGVUV0xtJTdEJTIyJTNFbXF0dENtbmRJZCUzQyUyRmZpZWxkJTNFJTNDdmFsdWUlMjBuYW1lJTNEJTIyVkFMVUUlMjIlM0UlM0NibG9jayUyMHR5cGUlM0QlMjJ0ZXh0JTIyJTIwaWQlM0QlMjJGM3FnampSYihxSGslNUUlNDByKSUyQmJXaCUyMiUzRSUzQ2ZpZWxkJTIwbmFtZSUzRCUyMlRFWFQlMjIlM0VtcXR0LjAuSGF1cy5EaXNwbGF5Lm5zcGFuZWxfN0JGOTA0LmNtbmQuTlNQU2VuZCUzQyUyRmZpZWxkJTNFJTNDJTJGYmxvY2slM0UlM0MlMkZ2YWx1ZSUzRSUzQ25leHQlM0UlM0NibG9jayUyMHR5cGUlM0QlMjJwcm9jZWR1cmVzX2NhbGxub3JldHVybiUyMiUyMGlkJTNEJTIyYmlJTlFVJTIzZkpiUCUzRiU1RSU3QnYlMjVvSyUzQiU1RCUyMiUzRSUzQ211dGF0aW9uJTIwbmFtZSUzRCUyMnNlbmRUZW1wJTIyJTNFJTNDJTJGbXV0YXRpb24lM0UlM0NuZXh0JTNFJTNDYmxvY2slMjB0eXBlJTNEJTIyY29tbWVudCUyMiUyMGlkJTNEJTIyMSU1RDJPSjFrQyU3QiFSc0d0dDNxTy4lNUIlMjIlM0UlM0NmaWVsZCUyMG5hbWUlM0QlMjJDT01NRU5UJTIyJTNFV29obnppbW1lciUyMFRlbXBlcmF0dXIlMjBpbSUyME5TUGFuZWwlMjBhbnplaWdlbiUzQyUyRmZpZWxkJTNFJTNDbmV4dCUzRSUzQ2Jsb2NrJTIwdHlwZSUzRCUyMm9uJTIyJTIwaWQlM0QlMjIxajMhbSU3Q0olM0IlNUVTJTVCeiU3RFhrZnp5d1QlMjIlM0UlM0NmaWVsZCUyMG5hbWUlM0QlMjJPSUQlMjIlM0V6aWdiZWUuMC4wMDE1OGQwMDA2YmY0YWU0LnRlbXBlcmF0dXJlJTNDJTJGZmllbGQlM0UlM0NmaWVsZCUyMG5hbWUlM0QlMjJDT05ESVRJT04lMjIlM0VhbnklM0MlMkZmaWVsZCUzRSUzQ2ZpZWxkJTIwbmFtZSUzRCUyMkFDS19DT05ESVRJT04lMjIlM0UlM0MlMkZmaWVsZCUzRSUzQ3N0YXRlbWVudCUyMG5hbWUlM0QlMjJTVEFURU1FTlQlMjIlM0UlM0NibG9jayUyMHR5cGUlM0QlMjJwcm9jZWR1cmVzX2NhbGxub3JldHVybiUyMiUyMGlkJTNEJTIyT2hVYVIhM21xTS0lNUVIJTVCdiolN0RfcCUyMyUyMiUzRSUzQ211dGF0aW9uJTIwbmFtZSUzRCUyMnNlbmRUZW1wJTIyJTNFJTNDJTJGbXV0YXRpb24lM0UlM0MlMkZibG9jayUzRSUzQyUyRnN0YXRlbWVudCUzRSUzQyUyRmJsb2NrJTNFJTNDJTJGbmV4dCUzRSUzQyUyRmJsb2NrJTNFJTNDJTJGbmV4dCUzRSUzQyUyRmJsb2NrJTNFJTNDJTJGbmV4dCUzRSUzQyUyRmJsb2NrJTNFJTNDYmxvY2slMjB0eXBlJTNEJTIycHJvY2VkdXJlc19kZWZub3JldHVybiUyMiUyMGlkJTNEJTIyJTNEYmNEKFolM0RXdVRBTmQlNUVycWJNQUMlMjIlMjB4JTNEJTIyMTg3JTIyJTIweSUzRCUyMjYyJTIyJTNFJTNDZmllbGQlMjBuYW1lJTNEJTIyTkFNRSUyMiUzRXNlbmRUZW1wJTNDJTJGZmllbGQlM0UlM0Njb21tZW50JTIwcGlubmVkJTNEJTIyZmFsc2UlMjIlMjBoJTNEJTIyODAlMjIlMjB3JTNEJTIyMTYwJTIyJTNFQmVzY2hyZWliZSUyMGRpZXNlJTIwRnVua3Rpb24lMjAlRTIlODAlQTYlM0MlMkZjb21tZW50JTNFJTNDc3RhdGVtZW50JTIwbmFtZSUzRCUyMlNUQUNLJTIyJTNFJTNDYmxvY2slMjB0eXBlJTNEJTIycHJvY2VkdXJlc19jYWxsY3VzdG9tbm9yZXR1cm4lMjIlMjBpZCUzRCUyMnpOaiU3QzIlMkZhLlVuX2NDcmZLLSUyQiUyNUIlMjIlM0UlM0NtdXRhdGlvbiUyMG5hbWUlM0QlMjJzZXRUZW1wJTIyJTNFJTNDYXJnJTIwbmFtZSUzRCUyMnRlbXAlMjIlM0UlM0MlMkZhcmclM0UlM0NhcmclMjBuYW1lJTNEJTIyaHVtJTIyJTNFJTNDJTJGYXJnJTNFJTNDJTJGbXV0YXRpb24lM0UlM0N2YWx1ZSUyMG5hbWUlM0QlMjJBUkcwJTIyJTNFJTNDYmxvY2slMjB0eXBlJTNEJTIyZ2V0X3ZhbHVlJTIyJTIwaWQlM0QlMjIlNURzJTdCbGZnJTVEJTYwanNLdCU2MGRyJTJDJTdDYk5vJTIyJTNFJTNDZmllbGQlMjBuYW1lJTNEJTIyQVRUUiUyMiUzRXZhbCUzQyUyRmZpZWxkJTNFJTNDZmllbGQlMjBuYW1lJTNEJTIyT0lEJTIyJTNFemlnYmVlLjAuMDAxNThkMDAwNmJmNGFlNC50ZW1wZXJhdHVyZSUzQyUyRmZpZWxkJTNFJTNDJTJGYmxvY2slM0UlM0MlMkZ2YWx1ZSUzRSUzQ3ZhbHVlJTIwbmFtZSUzRCUyMkFSRzElMjIlM0UlM0NibG9jayUyMHR5cGUlM0QlMjJnZXRfdmFsdWUlMjIlMjBpZCUzRCUyMkQ5Vy5OOTAlM0Y1MERhciU3Q0NWTGJ0JTJDJTIyJTNFJTNDZmllbGQlMjBuYW1lJTNEJTIyQVRUUiUyMiUzRXZhbCUzQyUyRmZpZWxkJTNFJTNDZmllbGQlMjBuYW1lJTNEJTIyT0lEJTIyJTNFemlnYmVlLjAuMDAxNThkMDAwNmJmNGFlNC5odW1pZGl0eSUzQyUyRmZpZWxkJTNFJTNDJTJGYmxvY2slM0UlM0MlMkZ2YWx1ZSUzRSUzQyUyRmJsb2NrJTNFJTNDJTJGc3RhdGVtZW50JTNFJTNDJTJGYmxvY2slM0UlM0MlMkZ4bWwlM0U=